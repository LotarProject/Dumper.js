/*!
 * Dumper.js (a PHP var_dump like function)
 * https://github.com/LotarProject/Dumper.js
 *
 * @version   v1.0.0 (2015-08-20)
 * @copyright (C)2015, Giuseppe Di Terlizzi
 * @author    Giuseppe Di Terlizzi <giuseppe.diterlizzi@gmail.com>
 * @license   GPLv2
 */
function Dumper(a){if(this instanceof Dumper){this._object=a}else{return new Dumper(a)}}Dumper.prototype={CHR_SPACE:" ",CHR_NEWLINE:"\n",CHR_ARROW:"=>",COLOR_NUMBER:"green",COLOR_STRING:"red",COLOR_NULL:"blue",COLOR_BOOLEAN:"purple",COLOR_ARROW:"gray",FONT_FAMILY:"monospace",FONT_SIZE:"1em",FONT_SPACE:"pre-wrap",TEMPLATE_NUMBER:'<span style="color:{COLOR}">{VALUE}</span>',TEMPLATE_STRING:"<span style=\"color:{COLOR}\">'{VALUE}'</span> <em>(length={LENGTH})</em>",TEMPLATE_NULL:'<span style="color:{COLOR}">null</span>',TEMPLATE_OBJECT:"<em>(size={SIZE})</em>",TEMPLATE_BOOLEAN:'<span style="color:{COLOR}">{VALUE}</span>',TEMPLATE_ARROW:'<span style="color:{COLOR}">{ARROW}</span>',TEMPLATE_DUMP:'<div class="dump" style="font-family:{FONT};font-size:{SIZE};white-space:{SPACE}">{DUMP}</div>',TEMPLATE_TYPE:"<small>{TYPE}</small> ",TEMPLATE_TYPE_OBJ:"<strong>{TYPE}</strong> ",TEMPLATE_KEY:"<span style=\"cursor:pointer\" onclick=\"javascript:(document.getElementById('{KEYID}').style.display=(document.getElementById('{KEYID}').style.display)?'':'none');\">{KEY}</span>",TEMPLATE_ITEMS:'<span id="{KEYID}">{ITEMS}</span>',toString:function(){var a=document.createElement("div");a.innerHTML=this._dump();return a.innerText},toHTML:function(){return this._dump()},_indent:function(b){var a="";for(i=0;i<b;i++){a+=this.CHR_SPACE}return a},_template:function(b,a){return b.replace(/{(\w+)}/g,function(d,c){return a[c]+""||"{"+c+"}"})},_isArray:function(a){return typeof a==="object"&&a instanceof Array},_isNull:function(a){return typeof a==="object"&&a===null},_randId:function(){return Math.floor(Math.random()*(1024*64))},_render:function(b){var a=(typeof b==="object")?((b===null)?"":this._template(this.TEMPLATE_TYPE_OBJ,{TYPE:(this._isArray(b)?"array":"object")})):this._template(this.TEMPLATE_TYPE,{TYPE:typeof(b)});switch(typeof b){case"number":a+=this._template(this.TEMPLATE_NUMBER,{VALUE:b,COLOR:this.COLOR_NUMBER});break;case"string":a+=this._template(this.TEMPLATE_STRING,{VALUE:b,COLOR:this.COLOR_STRING,LENGTH:b.length});break;case"object":a+=(b===null)?this._template(this.TEMPLATE_NULL,{COLOR:this.COLOR_NULL}):this._template(this.TEMPLATE_OBJECT,{SIZE:Object.keys(b).length});break;case"boolean":a+=this._template(this.TEMPLATE_BOOLEAN,{COLOR:this.COLOR_BOOLEAN,VALUE:b})}return a},_dumper:function(c){var e="",b=arguments,a=((b.length>1)?b[b.length-1]:0);if(typeof c==="object"&&c!==null){e+=this._indent(a)+this._render(c)+this.CHR_NEWLINE;a++;for(item in c){var d=this._randId();e+=this._indent(a)+(typeof c[item]==="object"&&c[item]!==null?"":item+" "+this._template(this.TEMPLATE_ARROW,{ARROW:this.CHR_ARROW,COLOR:this.COLOR_ARROW})+" ")+(typeof c[item]==="object"?(c[item]===null?this._render(null):this._template(this.TEMPLATE_KEY,{KEY:item,KEYID:"key-"+d})+" "+this._template(this.TEMPLATE_ARROW,{ARROW:this.CHR_ARROW,COLOR:this.COLOR_ARROW})):this._render(c[item])+" ")+this.CHR_NEWLINE+(typeof c[item]==="object"&&c[item]?this._template(this.TEMPLATE_ITEMS,{KEYID:"key-"+d,ITEMS:this._dumper(c[item],a+1)}):"")}}else{if(typeof c!=="object"){e+=this._render(c)+this.CHR_NEWLINE}}return e},_dump:function(){return this._template(this.TEMPLATE_DUMP,{DUMP:this._dumper(this._object),FONT:this.FONT_FAMILY,SIZE:this.FONT_SIZE,SPACE:this.FONT_SPACE})}};